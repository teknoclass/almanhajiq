@php
    $lectureRate = $lecturer->reviews
        ->where('sourse_id', $lecturer->id)
        ->where('sourse_type', 'user')
        ->sum('rate');
    $lectureRateCount = $lecturer->reviews
        ->where('sourse_id', $lecturer->id)
        ->where('sourse_type', 'user')
        ->count('rate');
    $lectureRateCount = round(fdiv($lectureRate, $lectureRateCount));
    $lecturerSetting = $lecturer->lecturerSetting;

    $lecturer_url = route('lecturerProfile.index', [
        'id' => $lecturer->id,
        'name' => mergeString(@$lecturer->name, ''),
    ]);
@endphp
<div class="col-lg-3 col-md-6 col-12 mb-4">
    <div class="teacher-box h-100">
        <div class="teachers-image">
            {{-- <a href="{{ @$lecturer_url }}">
                <div class="widget_item-overlay d-flex align-items-end justify-content-center">
                    @if (@$lecturerSetting->facebook)
                    <a href="{{@$lecturerSetting->facebook }}"> <i class="fa-brands fa-facebook"></i></a>
                    @endif
                    @if (@$lecturerSetting->twitter)
                    <a href="{{@$lecturerSetting->twitter }}"> <i class="fa-brands fa-twitter"></i></a>
                    @endif
                    @if (@$lecturer->mobile)
                    <a href="{{@$lecturer->mobile}}"> <i class="fa-solid fa-phone"></i></a>
                    @endif
                </div>
            </a> --}}
            <img src="{{ imageUrl(@$lecturer->image) }}" alt="{{ @$lecturer->name }}" loading="lazy"/>
        </div>
        <div class="teacher-info teacher-info-div">
            <div class="top-info">
                <a class="teacher-name" href="{{ @$lecturer_url }}">
                    {{ @$lecturer->name }}
                    @if (@$lecturer->belongs_to_awael)
                        <img src="{{ asset('assets/front/images/verified.png') }}" style="width: 20px">
                    @endif
                </a>
            </div>
            <h5 class="text-muted widget_item-jop">
                {{ @$lecturerSetting->position ? @$lecturerSetting->position : __('lecturer') }}
            </h5>

            @if (@$lecturer->country->name)
                <span class="text-color-muted">{{ @$lecturer->country->name }}</span>
            @endif
            <div class="bottom-info mt-3">
                <div class="d-flex gap-2 mb-1 align-items-center">
                    <div>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M15.0004 5.96651C14.9504 5.95817 14.8921 5.95817 14.8421 5.96651C13.6921 5.92484 12.7754 4.98317 12.7754 3.81651C12.7754 2.62484 13.7337 1.6665 14.9254 1.6665C16.1171 1.6665 17.0754 2.63317 17.0754 3.81651C17.0671 4.98317 16.1504 5.92484 15.0004 5.96651Z"
                                fill="#6F2B90" />
                            <path
                                d="M14.1422 12.0333C15.2839 12.225 16.5422 12.025 17.4255 11.4333C18.6005 10.65 18.6005 9.36664 17.4255 8.58331C16.5339 7.99164 15.2589 7.79163 14.1172 7.99163"
                                fill="#6F2B90" />
                            <path
                                d="M4.97539 5.96651C5.02539 5.95817 5.08372 5.95817 5.13372 5.96651C6.28372 5.92484 7.20039 4.98317 7.20039 3.81651C7.20039 2.62484 6.24206 1.6665 5.05039 1.6665C3.85873 1.6665 2.90039 2.63317 2.90039 3.81651C2.90872 4.98317 3.82539 5.92484 4.97539 5.96651Z"
                                fill="#6F2B90" />
                            <path
                                d="M5.83353 12.0333C4.69186 12.225 3.43353 12.025 2.5502 11.4333C1.3752 10.65 1.3752 9.36664 2.5502 8.58331C3.44186 7.99164 4.71686 7.79163 5.85853 7.99163"
                                fill="#6F2B90" />
                            <path
                                d="M9.99941 12.1916C9.94941 12.1833 9.89108 12.1833 9.84108 12.1916C8.69108 12.1499 7.77441 11.2083 7.77441 10.0416C7.77441 8.84994 8.73275 7.8916 9.92441 7.8916C11.1161 7.8916 12.0744 8.85827 12.0744 10.0416C12.0661 11.2083 11.1494 12.1583 9.99941 12.1916Z"
                                fill="#6F2B90" />
                            <path
                                d="M7.57461 14.8168C6.39961 15.6001 6.39961 16.8835 7.57461 17.6668C8.90794 18.5585 11.0913 18.5585 12.4246 17.6668C13.5996 16.8835 13.5996 15.6001 12.4246 14.8168C11.0996 13.9335 8.90794 13.9335 7.57461 14.8168Z"
                                fill="#6F2B90" />
                        </svg>
                    </div>
                    <p class="text-color-muted">
                        {{ @$lecturer->RelatedStudents()->count() }}
                        <span>{{ __('students') }}</span>
                    </p>
                </div>
                <div class="d-flex gap-2  align-items-center">
                    <span>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M9.38333 19.25L8.15 15.55H1.75C1.19772 15.55 0.75 15.1023 0.75 14.55V1.75C0.75 1.19772 1.19772 0.75 1.75 0.75H7.4C7.84444 0.75 8.23556 1.04333 8.36 1.47L9.22917 4.45H18.25C18.8023 4.45 19.25 4.89772 19.25 5.45V18.25C19.25 18.8023 18.8023 19.25 18.25 19.25H9.38333Z"
                                fill="#6F2B90" />
                            <path
                                d="M8.48473 10.6115C8.51389 10.6873 8.52848 10.7515 8.52848 10.804C8.52848 10.9265 8.48473 11.0315 8.39723 11.119C8.30973 11.2065 8.20181 11.2503 8.07348 11.2503C7.98598 11.2503 7.90139 11.2269 7.81973 11.1803C7.74389 11.1278 7.68848 11.0578 7.65348 10.9703L7.16348 9.74525H4.02223L3.52348 10.9703C3.48264 11.0578 3.42431 11.1278 3.34848 11.1803C3.27264 11.2269 3.19098 11.2503 3.10348 11.2503C2.97514 11.2503 2.86723 11.2065 2.77973 11.119C2.69806 11.0257 2.65723 10.9178 2.65723 10.7953C2.65723 10.7369 2.67181 10.6698 2.70098 10.594L5.15973 4.72275C5.24723 4.51859 5.39014 4.4165 5.58848 4.4165C5.79848 4.4165 5.94139 4.51859 6.01723 4.72275L8.48473 10.6115ZM6.85723 8.99275L5.60598 5.87775L4.32848 8.99275H6.85723Z"
                                fill="white" stroke="white" stroke-width="0.1" stroke-linejoin="round" />
                            <path
                                d="M16.6921 10.062C16.6921 10.0964 16.6829 10.1453 16.6644 10.2088C16.6485 10.2696 16.626 10.3331 16.5969 10.3992C16.5705 10.4627 16.5401 10.5209 16.5057 10.5738C16.4739 10.6267 16.4409 10.6597 16.4065 10.673C16.0177 10.8264 15.6699 10.989 15.3631 11.1609C15.0563 11.3329 14.7958 11.518 14.5815 11.7164C14.3673 11.9121 14.2033 12.1224 14.0896 12.3472C13.9759 12.5693 13.919 12.8087 13.919 13.0652C13.919 13.343 13.9785 13.5823 14.0975 13.7833C14.2166 13.9843 14.3858 14.1523 14.6053 14.2872C14.8249 14.4221 15.0907 14.5252 15.4028 14.5966C15.7175 14.668 16.068 14.7143 16.4541 14.7355C16.6207 14.7461 16.7768 14.75 16.9222 14.7474C17.0704 14.7447 17.2052 14.7394 17.3269 14.7315C17.4486 14.7262 17.5544 14.7183 17.6443 14.7077C17.7342 14.6998 17.8056 14.6932 17.8585 14.6879C17.9008 14.6879 17.922 14.7249 17.922 14.799C17.922 14.8571 17.9167 14.8995 17.9061 14.9259C17.8955 14.9524 17.877 14.9695 17.8506 14.9775C17.7263 15.033 17.5914 15.0859 17.4459 15.1362C17.3031 15.1891 17.1576 15.2354 17.0095 15.275C16.8641 15.3173 16.7199 15.3504 16.5771 15.3742C16.4369 15.4007 16.3073 15.4139 16.1883 15.4139C15.6673 15.4139 15.2361 15.3597 14.895 15.2512C14.5538 15.1454 14.2814 14.9973 14.0777 14.8069C13.8767 14.6191 13.7352 14.3969 13.6532 14.1404C13.5739 13.8865 13.5342 13.6101 13.5342 13.3112C13.5342 13.0282 13.5659 12.7717 13.6294 12.5416C13.6955 12.3115 13.7775 12.1052 13.8754 11.9227C13.9759 11.7402 14.0856 11.5815 14.2047 11.4466C14.3263 11.3091 14.4427 11.1914 14.5538 11.0935C14.4453 11.0433 14.3369 10.9798 14.2285 10.9031C14.12 10.8264 14.0222 10.7417 13.9349 10.6492C13.8476 10.554 13.7762 10.4548 13.7206 10.3516C13.6677 10.2458 13.6413 10.14 13.6413 10.0342C13.6413 9.9258 13.6572 9.81207 13.6889 9.69305C13.7206 9.57404 13.7643 9.45898 13.8198 9.3479C13.878 9.23417 13.9468 9.12705 14.0261 9.02655C14.1055 8.9234 14.1927 8.83348 14.288 8.75677C14.3832 8.68007 14.485 8.61924 14.5934 8.57428C14.7019 8.52932 14.8143 8.50684 14.9307 8.50684C15.0576 8.50684 15.17 8.51874 15.2679 8.54254C15.3684 8.5637 15.4583 8.59279 15.5377 8.62982C15.617 8.6642 15.6871 8.70388 15.7479 8.74884C15.8088 8.7938 15.8656 8.83744 15.9185 8.87976C15.9635 8.91414 15.9939 8.94985 16.0098 8.98688C16.0256 9.02126 16.0336 9.0768 16.0336 9.1535C16.0336 9.24607 16.0071 9.29236 15.9542 9.29236C15.9331 9.29236 15.9 9.27913 15.855 9.25269C15.8127 9.22624 15.7598 9.19847 15.6964 9.16937C15.6355 9.13763 15.5668 9.10854 15.4901 9.08209C15.416 9.05564 15.3366 9.04242 15.252 9.04242C15.1621 9.04242 15.0616 9.05697 14.9505 9.08606C14.8394 9.11515 14.7283 9.15747 14.6172 9.21301C14.5088 9.26591 14.4057 9.33071 14.3078 9.40741C14.2126 9.48411 14.1359 9.57139 14.0777 9.66925C14.0777 9.73008 14.0962 9.79356 14.1332 9.85968C14.1729 9.92316 14.2245 9.98663 14.288 10.0501C14.3514 10.1136 14.4229 10.1744 14.5022 10.2326C14.5815 10.2881 14.6609 10.3384 14.7402 10.3834C14.8222 10.4257 14.9002 10.4601 14.9743 10.4865C15.0484 10.5103 15.1118 10.5222 15.1647 10.5222C15.1965 10.5222 15.2335 10.5169 15.2758 10.5063C15.3208 10.4931 15.3697 10.4773 15.4226 10.4587C15.4755 10.4376 15.531 10.4151 15.5892 10.3913C15.6474 10.3648 15.7043 10.3384 15.7598 10.312L16.5493 9.98267C16.6022 9.95886 16.6392 9.9549 16.6604 9.97076C16.6816 9.98663 16.6921 10.017 16.6921 10.062Z"
                                fill="white" stroke="white" stroke-width="0.3" stroke-linejoin="round" />
                        </svg>
                    </span>
                    <p class="text-color-muted">
                        {{ @$lecturer->LecturerCoursesCount() }}
                        <span>{{ __('courses') }}</span>
                    </p>
                </div>
               {{-- <div class="data-rating mt-1">
                    <span data-rating="{{ @$lecturer->getRating() }}">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M6.58692 5.76911L0.779551 6.61109L0.676693 6.63202C0.520986 6.67336 0.379038 6.75528 0.265346 6.86942C0.151654 6.98355 0.0702908 7.12582 0.0295652 7.28169C-0.0111605 7.43756 -0.00978922 7.60144 0.0335388 7.75661C0.0768668 7.91177 0.160599 8.05266 0.276185 8.16488L4.48334 12.2601L3.49117 18.0447L3.47934 18.1448C3.46981 18.3059 3.50325 18.4665 3.57624 18.6104C3.64922 18.7543 3.75914 18.8762 3.89472 18.9636C4.0303 19.051 4.18668 19.1008 4.34785 19.108C4.50902 19.1151 4.66918 19.0792 4.81194 19.0041L10.0058 16.2733L15.1878 19.0041L15.2789 19.046C15.4291 19.1051 15.5924 19.1233 15.752 19.0985C15.9115 19.0738 16.0617 19.007 16.1869 18.9051C16.3122 18.8032 16.4081 18.6698 16.4648 18.5186C16.5214 18.3674 16.5369 18.2038 16.5095 18.0447L15.5164 12.2601L19.7254 8.16397L19.7964 8.0866C19.8978 7.96168 19.9643 7.81211 19.9891 7.65313C20.0139 7.49415 19.9961 7.33144 19.9376 7.18157C19.879 7.0317 19.7818 6.90003 19.6558 6.79998C19.5297 6.69992 19.3795 6.63506 19.2202 6.612L13.4129 5.76911L10.8168 0.507889C10.7417 0.355455 10.6254 0.227092 10.4811 0.137332C10.3368 0.0475725 10.1703 0 10.0003 0C9.8304 0 9.66386 0.0475725 9.51956 0.137332C9.37526 0.227092 9.25897 0.355455 9.18385 0.507889L6.58692 5.76911Z"
                                fill="#6F2B90" />
                        </svg>
                    </span>
                    <span class="text-color-muted-02">{{ @$lecturer->getRating() }}</span>
                </div> --}}
            </div>
            <a class="primary-btn d-block text-center w-100 p-1 mt-3"
                href="{{ @$lecturer_url }}">{{ __('view_profile') }}
            </a>
            @if (@$lecturer->id != auth()->id() && in_array(@$lecturer->id, $lecturers_has_lessons2))
               {{-- <a class="btn btn-success py-2 px-2 mt-4" href="{{ @$lecturer_url . '?tab=reserve' }}"
                    style="width:100%"><i class="fa-solid fa-calendar-days me-1"></i>{{ __('Test_Reservation') }} </a> --}}
            @endif

        </div>
    </div>
</div>
